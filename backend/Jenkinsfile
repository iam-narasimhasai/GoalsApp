pipeline {
    agent any
    tools{
        nodejs 'nodejs18206'
    }
    environment{
        MONGOURI = "mongodb+srv://cluster0.awxhn.mongodb.net/retryWrites=true&w=majority"
        MONGO_USER = "sai"
        MONGO_PASSWORD = "secret32412"
        PORT = 2121
        SONAR_SCANNER_HOME= tool 'sonar7'
    }
    stages {
        stage('Git Checkout') {
            steps {
               git branch:'pre-prod' url: 'https://github.com/iam-narasimhasai/GoalsApp'
            }
        }


         stage('Install Dependencies') {
            steps {
                sh '''
                cd backend/
                npm install

                '''
            }
        }


         stage('Unit Testing') {
            steps {
                sh '''
                npm test
                '''
            }
        }


         stage('Code Coverage') {
            steps {
                sh '''
                npm run coverage
                '''
            }
        }

        

    }






}
